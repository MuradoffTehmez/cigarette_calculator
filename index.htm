<!DOCTYPE html>
<html lang="az">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siqaret X…ôrcl…ôri Hesablama Sistemi</title>
    <link rel="stylesheet" href="style.scss">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header>
        <button id="dark-mode-toggle" class="dark-mode-btn">üåô</button>
        <h1>Siqaret X…ôrcl…ôri Hesablama Sistemi</h1>
    </header>

    <main>
        <section id="intro">
            <div class="card">
                <h4>Proqram Haqqƒ±nda</h4>
                <p>
                    Bu proqram siz…ô siqaretin iqtisadi v…ô saƒülamlƒ±q baxƒ±mƒ±ndan t…ôsirl…ôrini hesablamaq √º√ß√ºn n…ôz…ôrd…ô
                    tutulub. Siqaretl…ô baƒülƒ± ≈ü…ôxsi statistikanƒ±zƒ± asanlƒ±qla izl…ôy…ô v…ô sosial mediada payla≈üa bil…ôrsiniz.
                </p>
                <p><strong>M√º…ôllif:</strong> T…ôhm…ôz Muradov</p>
            </div>
        </section>

        <section id="form-section">
            <div class="card">
                <form id="cigarette-form">
                    <label for="firstName">Ad:</label>
                    <input type="text" id="firstName" required>

                    <label for="lastName">Soyad:</label>
                    <input type="text" id="lastName" required>

                    <label for="gender">Cins:</label>
                    <select id="gender" required>
                        <option value="male">Ki≈üi</option>
                        <option value="female">Qadƒ±n</option>
                        <option value="other">Dig…ôr</option>
                    </select>

                    <label for="birthDate">Doƒüum Tarixi:</label>
                    <input type="date" id="birthDate" required>

                    <label for="startDate">Siqaret…ô ba≈ülama Tarixi:</label>
                    <input type="date" id="startDate" required>

                    <label for="pricePerPack">Bir paket qiym…ôti (AZN):</label>
                    <input type="number" id="pricePerPack" required>

                    <label for="cigarettesPerDay">G√ºnd…ôlik √ß…ôkil…ôn siqaret sayƒ±:</label>
                    <input type="number" id="cigarettesPerDay" required>

                    <button type="submit">Hesabla</button>
                </form>
            </div>
        </section>

        <section id="results">
            <div class="card">
                <h4>N…ôtic…ôl…ôr</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Statistika</th>
                            <th>D…ôy…ôr</th>
                        </tr>
                    </thead>
                    <tbody id="results-body"></tbody>
                </table>
                <div id="chart-container">
                    <canvas id="stats-chart"></canvas>
                </div>
            </div>
        </section>

        <section id="social-share">
            <div class="card">
                <h4>N…ôtic…ôl…ôri Payla≈ü</h4>
                <p>Sosial mediada payla≈ümaq √º√ß√ºn se√ßim edin:</p>
                <button class="btn btn-facebook" id="share-facebook">Facebook</button>
                <button class="btn btn-twitter" id="share-twitter">X</button>
                <button class="btn btn-whatsapp" id="share-whatsapp">WhatsApp</button>
            </div>
        </section>
    </main>

    <script>
        // Dark mode d√ºym…ôsi v…ô v…ôziyy…ôti
        const darkModeToggle = document.querySelector('#dark-mode-toggle');
        const body = document.body;

        darkModeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', body.classList.contains('dark-mode') ? 'enabled' : 'disabled');
        });

        // Dark mode v…ôziyy…ôtini yadda saxla
        if (localStorage.getItem('darkMode') === 'enabled') {
            body.classList.add('dark-mode');
        }

        // Ya≈ü hesablama funksiyasƒ±
        function calculateAge(birthDate) {
            const today = new Date();
            const birthDateObj = new Date(birthDate);
            let age = today.getFullYear() - birthDateObj.getFullYear();
            const month = today.getMonth() - birthDateObj.getMonth();
            if (month < 0 || (month === 0 && today.getDate() < birthDateObj.getDate())) {
                age--;
            }
            return age;
        }

        // Siqaret…ô ba≈ülama ya≈üƒ±nƒ± hesablama
        function calculateStartAge(startDate, birthDate) {
            const start = new Date(startDate);
            const birth = new Date(birthDate);
            let ageAtStart = start.getFullYear() - birth.getFullYear();
            const month = start.getMonth() - birth.getMonth();
            if (month < 0 || (month === 0 && start.getDate() < birth.getDate())) {
                ageAtStart--;
            }
            return ageAtStart;
        }

        // Siqaret √ß…ôkil…ôn g√ºnl…ôr v…ô dig…ôr hesablamalar
        function calculateTotalExpenses(startDate, cigarettesPerDay, pricePerPack) {
            const today = new Date();
            const daysSmoking = Math.ceil((today - new Date(startDate)) / (1000 * 60 * 60 * 24));
            const cigarettesSmoked = daysSmoking * cigarettesPerDay;
            const packsSmoked = cigarettesSmoked / 20;
            const totalSpent = packsSmoked * pricePerPack;

            return { daysSmoking, cigarettesSmoked, packsSmoked, totalSpent };
        }

        // Hesablamalarƒ± aparmaq v…ô n…ôtic…ôl…ôri g√∂st…ôrm…ôk √º√ß√ºn …ôsas funksiya
        document.querySelector('#cigarette-form').addEventListener('submit', (e) => {
            e.preventDefault();

            // D…ôy…ôrl…ôri …ôld…ô et
            const firstName = document.querySelector('#firstName').value;
            const lastName = document.querySelector('#lastName').value;
            const gender = document.querySelector('#gender').value;
            const pricePerPack = parseFloat(document.querySelector('#pricePerPack').value);
            const cigarettesPerDay = parseInt(document.querySelector('#cigarettesPerDay').value);
            const birthDate = document.querySelector('#birthDate').value;
            const startDate = document.querySelector('#startDate').value;

            // Ya≈ü v…ô ba≈ülama ya≈üƒ±nƒ± hesabla
            const age = calculateAge(birthDate);
            const startAge = calculateStartAge(startDate, birthDate);

            // Siqaret…ô √ß…ôkil…ôn g√ºnl…ôr v…ô dig…ôr hesablamalar
            const { daysSmoking, cigarettesSmoked, packsSmoked, totalSpent } = calculateTotalExpenses(startDate, cigarettesPerDay, pricePerPack);

            // N…ôtic…ôl…ôri g√∂st…ôr
            const resultsBody = document.querySelector('#results-body');
            resultsBody.innerHTML = `
                <tr><td><strong>Ad:</strong></td><td>${firstName}</td></tr>
                <tr><td><strong>Soyad:</strong></td><td>${lastName}</td></tr>
                <tr><td><strong>Cins:</strong></td><td>${gender === 'male' ? 'Ki≈üi' : gender === 'female' ? 'Qadƒ±n' : 'Dig…ôr'}</td></tr>
                <tr><td><strong>Ya≈üƒ±nƒ±z:</strong></td><td>${age} ya≈ü</td></tr>
                <tr><td><strong>Siqaret √ß…ôkm…ôy…ô ba≈üladƒ±ƒüƒ±nƒ±z ya≈ü:</strong></td><td>${startAge} ya≈ü</td></tr>
                <tr><td><strong>√úmumi siqaret √ß…ôkil…ôn g√ºnl…ôr:</strong></td><td>${daysSmoking} g√ºn</td></tr>
                <tr><td><strong>√úmumi √ß…ôkil…ôn siqaretl…ôr:</strong></td><td>${cigarettesSmoked}</td></tr>
                <tr><td><strong>√úmumi paket miqdarƒ±:</strong></td><td>${packsSmoked.toFixed(1)} paket</td></tr>
                <tr><td><strong>X…ôrcl…ôn…ôn √ºmumi m…ôbl…ôƒü:</strong></td><td>${totalSpent.toFixed(2)} AZN</td></tr>
            `;

            // Qrafikl…ôri yenil…ôm…ô
            updateChart(daysSmoking, packsSmoked, totalSpent);
        });

        // Qrafikl…ôri yenil…ôm…ô funksiyasƒ±
        function updateChart(daysSmoking, packsSmoked, totalSpent) {
            const ctx = document.getElementById('stats-chart').getContext('2d');
            if (window.myChart) window.myChart.destroy(); // ∆èvv…ôlki qrafiki m…ôhv et

            window.myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Siqaret √á…ôkil…ôn G√ºnl…ôr', 'Paketl…ôr', 'X…ôrcl…ôn…ôn M…ôbl…ôƒü (AZN)'],
                    datasets: [{
                        label: 'Statistikalar',
                        data: [daysSmoking, packsSmoked, totalSpent],
                        backgroundColor: ['#4CAF50', '#FFC107', '#FF5722'],
                        borderColor: ['#388E3C', '#FF9800', '#F44336'],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Sosial mediya payla≈üma funksiyasƒ±
        document.querySelector('#share-facebook').addEventListener('click', () => {
            alert('Facebook-da payla≈ümaq √º√ß√ºn hazƒ±r deyil.');
        });

        document.querySelector('#share-twitter').addEventListener('click', () => {
            alert('X-d…ô payla≈ümaq √º√ß√ºn hazƒ±r deyil.');
        });

        document.querySelector('#share-whatsapp').addEventListener('click', () => {
            alert('WhatsApp-da payla≈ümaq √º√ß√ºn hazƒ±r deyil.');
        });
    </script>
</body>

</html>